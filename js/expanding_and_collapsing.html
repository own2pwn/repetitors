
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expanding And Collapsing</title>
</head>
<body>

<div><a id=link_1 href="#open1">Ссылка 1</a></div>
<div id=hidden_1 style="display:none;height:200px;width:350px;background-color:#f0f0f0">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div>

<div><a id=link_2 href="#open2">Ссылка 2</a></div>
<div id=hidden_2 style="display:none;height:200px;width:350px;background-color:#f0f0f0">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div>

<div><a id=link_3 href="#open3">Ссылка 3</a></div>
<div id=hidden_3 style="display:none;height:200px;width:350px;background-color:#f0f0f0">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div>

<div><a id=link_4 href="#open4">Ссылка 4</a></div>
<div id=hidden_4 style="display:none;height:200px;width:350px;background-color:#f0f0f0">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</div>

 <script>


(function () {
  var numberEl = 4;
  var heighMust = determineMustHeight();
  for (var i = 1; i <= numberEl; i++) {
    (function(j) {
      getByID('link_' + j).onclick = function() {
        action('hidden_' + j, heighMust['hidden_' + j], 5);
      };
    }(i));
  }
  // getByID('link_2').onclick = function() {
  //   action('hidden_2', heighMust['hidden_2'], 3);
  // };
  //
  // шаг
  var s = {};
  /**
   * @param  h   –– высота элемента, которая должна быть
   * @param  spd –– шаг с которым разворачивать/сворачивать
   */
  function action(id, h, spd) {
    // выбираем шаг, если его нет, то переданный(разворачивание), иначе отрицательный(свертывание)
    s[id] = (s[id] == spd) ? -spd : spd;
    setTimeout(ExpandingAndCollapsing(id, h), 10);
  }


  function ExpandingAndCollapsing (id, h) {
    var obj = getByID(id);
    // Если достигли требуемой высоты элемента
    if (obj.offsetHeight + s[id] >= h) {
      obj.style.height = h + "px";
      obj.style.overflow = "auto";
    } // Если при свертывании скрыли элемент
    else if (obj.offsetHeight + s[id] <= 0) {
       obj.style.height = 0 + "px";
       obj.style.display = "none";
     } // При развертывании-свертывании пересчитываем высоту элемента
     else {
         obj.style.height = (obj.offsetHeight + s[id]) + "px";
         obj.style.overflow = "hidden";
         obj.style.display = "block";
         setTimeout(function() {
           ExpandingAndCollapsing(id, h)}, 10);
      }
  }
  // Вычисляем высоту,которая должна быть у скрытого элемента
  function determineMustHeight () {
    var heighMust = {};
    for (var i = 1; i <= numberEl; i++) {
      var idHid = 'hidden_' + i;
      heighMust[idHid] = parseInt(getByID(idHid).style.height, 10);
    }
    return heighMust;
  }




}());

function getByID (id) {
  return document.getElementById(id);
}


 </script>


</body>

</html>



